<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>New Era — Web Store</title>
  <style>
    body { margin:0; font-family: Arial, sans-serif; background: #f4f4f4; }
    header { background: #002c5f; color: white; padding: 15px 20px; display: flex; align-items: center; justify-content: space-between; }
    header .logo { font-size: 24px; font-weight: bold; }
    header .cart-btn { cursor: pointer; background: #fff; color: #002c5f; padding: 8px 12px; border-radius: 5px; border: none; }
    .store-container { max-width: 1100px; margin: 30px auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(260px,1fr)); gap: 20px; }
    .product { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center; }
    .product img { width: 100%; max-height: 150px; object-fit: contain; margin-bottom: 10px; }
    .product-title { font-weight: bold; margin-bottom: 10px; }
    .price { color: #002c5f; font-weight: bold; margin-bottom: 10px; }
    .qty-box { width: 60px; padding: 5px; margin-bottom: 10px; }
    button { background: #002c5f; color: white; border: none; padding: 10px 15px; border-radius: 6px; cursor: pointer; font-size: 14px; }
    button:hover { background: #004080; }

    /* Cart dropdown/popup area */
    #cartSidebar { position: fixed; top: 0; right: -350px; width: 350px; height: 100%; background: #fff; box-shadow: -2px 0 5px rgba(0,0,0,0.2); transition: right 0.3s ease-in-out; padding: 20px; overflow-y: auto; }
    #cartSidebar.open { right: 0; }
    #cartSidebar h2 { margin-top: 0; color: #002c5f; }
    .cart-item { border-bottom: 1px solid #ccc; padding: 10px 0; }
    .cart-item span { display: block; }
    .checkout-btn { background: #002c5f; color: white; width: 100%; padding: 12px; border: none; border-radius: 5px; margin-top: 15px; font-size: 16px; }
  </style>
</head>
<body>

<header>
  <div class="logo">New Era Store</div>
  <button class="cart-btn" onclick="toggleCart()">Cart (<span id="cartCount">0</span>)</button>
</header>

<div class="store-container" id="productGrid">
  <!-- Products will be injected here by JS -->
</div>

<!-- CART SIDEBAR -->
<div id="cartSidebar">
  <h2>Your Cart</h2>
  <div id="cartItems"></div>
  <button class="checkout-btn" onclick="checkout()">Checkout</button>
</div>

<script>
// Mock product catalog (5 items), with undercut pricing  
const products = [
  { id: 1, name: "New Era 9FORTY Adjustable Cap – Black", priceNZD: 39.95, img: "https://via.placeholder.com/150" },
  { id: 2, name: "New Era 59FIFTY Fitted Cap – Navy", priceNZD: 44.95, img: "https://via.placeholder.com/150" },
  { id: 3, name: "New Era 9FIFTY Snapback – Red", priceNZD: 41.95, img: "https://via.placeholder.com/150" },
  { id: 4, name: "New Era Bucket Hat – Olive", priceNZD: 34.95, img: "https://via.placeholder.com/150" },
  { id: 5, name: "New Era Knit Beanie – Grey", priceNZD: 24.95, img: "https://via.placeholder.com/150" }
];

const cart = {};

function renderStore() {
  const grid = document.getElementById("productGrid");
  products.forEach(prod => {
    const div = document.createElement("div");
    div.className = "product";
    div.innerHTML = `
      <img src="${prod.img}" alt="${prod.name}">
      <div class="product-title">${prod.name}</div>
      <div class="price">$${prod.priceNZD.toFixed(2)} NZD</div>
      <input type="number" class="qty-box" min="1" value="1" id="qty-${prod.id}">
      <button onclick="addToCart(${prod.id})">Add to Cart</button>
    `;
    grid.appendChild(div);
  });
}

function addToCart(prodId) {
  const qtyInput = document.getElementById("qty-" + prodId);
  const qty = parseInt(qtyInput.value);
  if (!qty || qty < 1) return;

  if (!cart[prodId]) {
    cart[prodId] = { ...products.find(p => p.id === prodId), qty: 0 };
  }
  cart[prodId].qty += qty;
  updateCartUI();
}

function updateCartUI() {
  const cartItemsDiv = document.getElementById("cartItems");
  cartItemsDiv.innerHTML = "";
  let totalCount = 0;
  for (const id in cart) {
    const item = cart[id];
    totalCount += item.qty;
    const itemDiv = document.createElement("div");
    itemDiv.className = "cart-item";
    itemDiv.innerHTML = `
      <strong>${item.name}</strong>
      <span>Quantity: ${item.qty}</span>
      <span>Price each: $${item.priceNZD.toFixed(2)}</span>
      <span>Subtotal: $${(item.priceNZD * item.qty).toFixed(2)}</span>
    `;
    cartItemsDiv.appendChild(itemDiv);
  }
  document.getElementById("cartCount").innerText = totalCount;
}

function toggleCart() {
  document.getElementById("cartSidebar").classList.toggle("open");
}

function checkout() {
  alert("Checkout placeholder — in a real site, this is where you'd collect shipping & payment info.");
}

renderStore();
</script>

</body>
</html>
